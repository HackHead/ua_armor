include ../components/head.pug
.layout-wrapper.layout-content-navbar
  .layout-container
    include ../components/navigation.pug
    .layout-page
      include ../components/navbar.pug
      .content-wrapper
        // Content
        .container-xxl.flex-grow-1.container-p-y
          h4.fw-bold.py-3.mb-4
            span.text-muted.fw-light Товары /
            |  Изменить товар
          .row
            form(method="POST" action="/product/" + data.product._id + "/update"  enctype="multipart/form-data")
              .col-xl-6
                .card.mb-4
                  h5.card-header Заполните нужные вам поля
                  .card-body
                    .form-floating.mb-3
                      input#floatingInput.form-control(name="name" type='text' placeholder='' value=data.product.name)
                      label(for='floatingInput') Название
                      .form-text
                        | Должно быть не короче 8 и не длиннее 128 символов*
                    .input-group.mb-3
                      label.form-label(for='exampleFormControlSelect1' style="width: 100%") Цена
                      .input-group-text ₴
                      input.form-control-lg(type="text" name="price" class="form-control" placeholder="Стоимость" aria-label="Стоимость" value=data.product.price)
                      span.input-group-text .00
                    .mb-3
                      label.form-label(for='exampleFormControlSelect1') Процент скидки
                      input.form-control(type='number' name="sale" value=data.product.sale placeholder="0" aria-describedby='floatingInputHelp')
                    .mb-3
                      label.form-label(for='exampleFormControlSelect1') Категория товара
                      select#exampleFormControlSelect1.form-select.form-select-lg(aria-label='Default select example' name="category")
                        option(selected='') Выберите категорию
                        option(value='1') Одежда/Головые уборы/Перчатки
                        option(value='2') Обувь/Носки 
                        option(value='3') Тактическое снаряжение
                        option(value='4') Личная гигиена/Тактическая медицына  
                        option(value='5') Аксессуары
                    .mb-3
                      label.form-label(for='exampleFormControlTextarea1') Описание
                      textarea#exampleFormControlTextarea1.form-control(rows='8' name="description")
                        | #{data.product.description}
                      .form-text
                        | Должно быть не короче 64 и не длиннее 4096 символов*
                .card.mb-4
                  h5.card-header Дополнительно
                  .card-body
                    .form-check.form-switch.mb-2
                      if data.product.hidden === true
                        input#flexSwitchShow.form-check-input(type='checkbox' name="hidden" checked="")
                      else 
                        input#flexSwitchShow.form-check-input(type='checkbox' name="hidden")
                      label.form-check-label(for='flexSwitchShow') Не отображать товар на сайте
                    .form-check.form-switch.mb-2
                      if data.product.runningOut === true
                        input#flexSwitchLacking.form-check-input(type='checkbox' name="running_out" checked="")
                      else
                        input#flexSwitchLacking.form-check-input(type='checkbox' name="running_out")
                      label.form-check-label(for='flexSwitchLacking') Товар заканчивается
                    .form-check.form-switch.mb-2
                      if data.product.new
                        input#flexSwitchNew.form-check-input(type='checkbox' name="new" checked="")
                      else 
                        input#flexSwitchNew.form-check-input(type='checkbox' name="new")
                      label.form-check-label(for='flexSwitchNew') Новинка
                    .form-check.form-switch
                      if data.product.customers_choice
                        input#flexSwitchUsersChoice.form-check-input(type='checkbox' checked='' name="customers_choice")
                      else 
                        input#flexSwitchUsersChoice.form-check-input(type='checkbox' name="customers_choice")
                      label.form-check-label(for='flexSwitchUsersChoice') Выбор покупателей
                    .form-check.form-switch
                      if data.product.showInIndexSlider
                        input#flexSwitchHomeCarousel.form-check-input(type='checkbox' checked='' name="show_in_index_slider")
                      else 
                        input#flexSwitchHomeCarousel.form-check-input(type='checkbox' name="show_in_index_slider")
                      label.form-check-label(for='flexSwitchHomeCarousel') Показать в слайдере на главной странице
                    .form-check.form-switch
                      if data.product.showInIndexCatalog
                        input#flexSwitchHomeCatalog.form-check-input(type='checkbox' checked='' name="show_in_index_catalog")
                      else 
                        input#flexSwitchHomeCatalog.form-check-input(type='checkbox' name="show_in_index_catalog")

                      label.form-check-label(for='flexSwitchHomeCatalog') Показать в каталоге на главной странице
              .col-xl-6
                .card.mb-4
                  //- .d-flex(style="width: 100%; justify-content: flex-start; padding-top: 45px")
                    each src in data.product.images
                      div(style="max-width: 24%; border-radius: 15px; border: solid 2px #f2c014; margin-left: 1%; cursor: pointer")
                        img(src='/' + src, alt="" style="max-width: 100%")
                  h5.card-header Изображения
                  .card-body
                      .d-flex(style="width: 100%; max-height: 250px; align-items: center; justify-content: center; display: flex")
                          label.cursor-pointer(style="height: 250px; border: dashed 2px #D1D5DB; border-radius: 0.5rem; background-color: rgb(249 250 251); width: 100%; height: 10rem display: flex; align-items: center; justify-content: center" for='dropzone-file' class='dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600')
                              div(style="justify-content: center; align-items: center; display: flex; height: 100%; flex-wrap: wrap;")
                                  svg.mb-3(fill='none' stroke='currentColor' viewbox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' style="width: 2.5rem; height: 2.5rem; color: #9CA3AF; display:  block")
                                      path(stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12')
                                  p.mb-2.text-sm(style="color: #6B7280; font-size: 0.9rem; line-height: 1rem; display: inline-block; width: 100%; text-align: center")
                                      span(style="font-weight: 600") Нажмите чтобы загрузить
                                  p.text-xs(style="color: #6B7280; font-size: 0.9rem; line-height: 1rem; display: inline-block; width: 100%; text-align: center") SVG, PNG, JPG or GIF (До 5мб)
                              input#dropzone-file.hidden(type='file' name="images" style="display: none;" multiple)
                      #floatingInputHelp.form-text
                        | Первое изображение будет выбрано в качестве превью*
              .col-xl-12
                .card.mb-4
                  h5.card-header Отправить
                  .card-body
                      .d-flex(style="width: 100%; max-height: 250px; align-items: center; justify-content: center; display: flex")
                          button.btn.btn-primary.mr-2(type="submit") Сохранить
                          a.btn.btn-danger.mr-2(href="/admin/products") Отменить
          // / Content
        .content-backdrop.fade
    include ../components/footer-js.pug
